(()=>{var e={325:(e,t,r)=>{const s=r(61);e.exports=class{constructor(e,t,r,n,a){this.ships=[new s(e[0],e[1],e[2]),new s(t[0],t[1],t[2]),new s(r[0],r[1],r[2]),new s(n[0],n[1],n[2]),new s(a[0],a[1],a[2])],this.board=[],this.init()}init(){for(let e=0;e<10;e++){let e=[];for(let t=0;t<10;t++)e.push({hasShip:!1,isShot:!1});this.board.push(e)}this.PlacingShips()}PlacingShips(){this.ships.forEach((e=>{for(let t=0;t<=e.length-1;t++)"y"===e.al?this.board[e.position[0][0]][e.position[0][1]-t].hasShip=e.name:this.board[e.position[0][0]+t][e.position[0][1]].hasShip=e.name}))}receiveAttack(e){if(this.board[e[0]-1][e[1]-1].hasShip){let t=this.ships.find((t=>t.name===this.board[e[0]-1][e[1]-1].hasShip));return t.hit(),t.isSunk()?`sunk ${t.name.toLowerCase()}`:t.name.toLowerCase()}return this.board[e[0]-1][e[1]-1].isShot=!0,!1}}},62:(e,t,r)=>{r(325),e.exports=class{constructor(e){this.gameboard=e,this.turn=!1,this.hits=[]}attack(e){if(!this.hits.includes(e))return this.hits.push(e),this.turn=!1,this.gameboard.receiveAttack(e)}}},61:e=>{e.exports=class{constructor(e,t,r){switch(e.toLowerCase()){case"carrier":this.length=5;break;case"battleship":this.length=4;break;case"cruiser":case"submarine":this.length=3;break;case"destroyer":this.length=2;break;default:return"unknow Ship"}this.name=e,this.hits=0,this.Sunk=!1,this.position=t,this.position[0][0]-=1,this.position[0][1]-=1,this.al=r}hit(){this.hits+=1}isSunk(){return this.hits===this.length&&(this.Sunk=!0)}}},832:(e,t,r)=>{const s=r(325);e.exports=function(){const e=[],t=[];return[{name:"carrier",length:5},{name:"battleship",length:4},{name:"cruiser",length:3},{name:"submarine",length:3},{name:"destroyer",length:2}].forEach((r=>{for(;;){let s=Math.floor(2*Math.random())+1;s=1===s?"x":"y";let a=[Math.floor(10*Math.random())+1,Math.floor(10*Math.random())+1];if(n(a,r.length,s)){t.push([r.name,a,s]);for(let t=0;t<r.length;t++)"x"===s?e.push([a[0]+t,a[1]]):e.push([a[0],a[1]-t]);break}}})),new s([t[0][0],[t[0][1]],t[0][2]],[t[1][0],[t[1][1]],t[1][2]],[t[2][0],[t[2][1]],t[2][2]],[t[3][0],[t[3][1]],t[3][2]],[t[4][0],[t[4][1]],t[4][2]]);function r(e,t){return t[0]>10||t[1]>10||t[0]<1||t[1]<1||e.some((e=>e.every(((e,r)=>e===t[r]))))}function n(t,s,n){for(let a=0;a<s;a++)if("x"===n){if(r(e,[t[0]+a,t[1]]))return!1}else if(r(e,[t[0],t[1]-a]))return!1;return!0}}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,r),a.exports}(()=>{"use strict";const e=r(325);var t;const s=document.querySelector(".player"),n=document.createElement("div"),a=document.querySelector(".small-board"),i=document.querySelector(".ship-name"),o=["Carrier","BattleShip","Cruiser","Submarine","Destroyer"];let c="url(https://raw.githubusercontent.com/YotamOfri/BattleShips/c6c6d591ab196a16406e659b50bb701e497d9add/resources/carrier.svg)",l="x";var d=5;function u(e){if(!e.target.classList.contains("board")){let t=null,r=!0;for(let s=1;s<=d;s++)if(t){if(parseInt(t.parentNode.dataset.x)+1>10)return null;t=document.querySelector(`[data-x="${parseInt(t.parentNode.dataset.x)+1}`).children[10-t.dataset.y],t.style.backgroundImage.length>1&&(r=!1)}else t=e.target,t.style.backgroundImage.length>1&&(r=!1);if(r){t=null;let r=i.innerText.replace("Place Your","");r=r.replace(/\s/g,"");for(let s=1;s<=d;s++)t?(t=document.querySelector(`[data-x="${parseInt(t.parentNode.dataset.x)+1}`).children[10-t.dataset.y],t.setAttribute("data-name",r),t.style.backgroundImage=c):(t=e.target,t.setAttribute("data-name",r),t.style.backgroundImage=c);m(n)}}}function h(e){if(!e.target.classList.contains("board")){let t=i.innerText.replace("Place Your","");t=t.replace(/\s/g,"");let r=e.target,s=!0;for(let e=1;e<=d;e++)r.style.backgroundImage.length>1&&(s=!1),r=r.nextElementSibling;if(s){r=e.target;for(let e=1;e<=d;e++)r.setAttribute("data-name",t),r.style.backgroundImage=c,r=r.nextElementSibling;m(n)}}}function p(){let e=a.firstElementChild.firstElementChild;"x"===l?(n.style.width=e.offsetWidth*d+"px",n.style.height=`${e.offsetHeight}px`):(n.style.width=`${e.offsetWidth}px`,n.style.height=e.offsetHeight*d+"px")}function m(r){switch(getComputedStyle(r).backgroundColor){case"rgb(102, 102, 255)":r.style.backgroundColor="rgb(102, 255, 102)",c="url(https://raw.githubusercontent.com/YotamOfri/BattleShips/c6c6d591ab196a16406e659b50bb701e497d9add/resources/BattleShip.svg)",d=4,i.innerText="Place Your BattleShip",p();break;case"rgb(102, 255, 102)":r.style.backgroundColor="rgb(255, 255, 102)",c="url(https://raw.githubusercontent.com/YotamOfri/BattleShips/c6c6d591ab196a16406e659b50bb701e497d9add/resources/cruiser.svg)",d=3,i.innerText="Place Your Cruiser",p();break;case"rgb(255, 255, 102)":r.style.backgroundColor="rgb(255, 102, 102)",c="url(https://raw.githubusercontent.com/YotamOfri/BattleShips/c6c6d591ab196a16406e659b50bb701e497d9add/resources/submarine.svg)",i.innerText="Place Your Submarine",p();break;case"rgb(255, 102, 102)":r.style.backgroundColor="rgb(255, 102, 255)",c="url(https://raw.githubusercontent.com/YotamOfri/BattleShips/c6c6d591ab196a16406e659b50bb701e497d9add/resources/destroyer.svg)",d=2,i.innerText="Place Your Destroyer",p();break;case"rgb(255, 102, 255)":{let r=function(){let e=[];return o.forEach((t=>{let r=a.querySelectorAll(`[data-name="${t}"]`),s=b(r[0]),n=b(r[r.length-1]);s[0]===n[0]?e.push([t,s,"y"]):e.push([t,s,"x"])})),e}();t=new e([r[0][0],[r[0][1]],r[0][2]],[r[1][0],[r[1][1]],r[1][2]],[r[2][0],[r[2][1]],r[2][2]],[r[3][0],[r[3][1]],r[3][2]],[r[4][0],[r[4][1]],r[4][2]]);const s=document.createElement("div"),i=document.createElement("div");s.classList.add("endpos-btn-container"),i.classList.add("endpos-btn"),i.innerText="Submit",n.remove(),i.addEventListener("click",f),s.append(i),a.append(s)}}}function b(e){return[parseInt(e.parentNode.dataset.x),parseInt(e.dataset.y)]}function f(){a.removeEventListener("click",u),a.removeEventListener("click",h);const e=document.querySelector(".setup-container"),t=document.querySelectorAll("[data-name]");e.remove(),function(e){e.forEach((e=>{let t=b(e),r=s.querySelector(`[data-x="${t[0]}"]`).querySelector(`[data-y="${t[1]}"]`);r.style.backgroundImage=e.style.backgroundImage,r.setAttribute("data-name",e.dataset.name)}))}(t)}r(325);const g=r(62),y=r(832);n.classList.add("has_ship"),a.append(n),n.style.width=n.offsetWidth*d+"px",a.addEventListener("mouseover",(e=>{e.target.classList.contains("board")||(n.style.top=e.target.offsetTop+"px",n.style.left=e.target.offsetLeft+"px")})),a.addEventListener("click",u),document.querySelector(".rotate-btn").addEventListener("click",(function(){if("x"===l?(a.removeEventListener("click",u),a.addEventListener("click",h),l="y",p()):(a.removeEventListener("click",h),a.addEventListener("click",u),l="x",p()),void 0!==t)return t})),window.addEventListener("resize",p);const k=new g(y());var v;const x=document.querySelector(".computer"),S=document.querySelector(".information"),L=[{name:"carrier",pos:[]},{name:"battleship",pos:[]},{name:"cruiser",pos:[]},{name:"submarine",pos:[]},{name:"destroyer",pos:[]}],E=[{name:"carrier",pos:[]},{name:"battleship",pos:[]},{name:"cruiser",pos:[]},{name:"submarine",pos:[]},{name:"destroyer",pos:[]}];function w(e){if(e.target.classList.contains("hitable")){let t=k.attack(b(e.target));if(!1===t)S.innerText="Player Missed",e.target.classList.add("hitted");else if(e.target.classList.add("hit-ship"),t.includes("sunk")){const r=t.replace(new RegExp("\\bsunk\\s*","g"),"");S.innerText=`Computer sank Players : ${r}`;let s=q(r);L[s].pos.push(e.target);for(const e of L[s].pos)e.classList.add("sunk");if(T(k))return I("Player Wins")}else{S.innerText="Player Hit";let r=q(t);L[r].pos.push(e.target)}e.target.classList.remove("hitable"),function(){x.removeEventListener("click",w);const e=function(e){let t;for(;t=[Math.floor(10*Math.random())+1,Math.floor(10*Math.random())+1],C(e.hits,t););return t}(v),t=document.querySelector(`[data-x="${e[0]}"]`).querySelector(`[data-y="${e[1]}"]`);if(t.classList.contains("square")){let e=v.attack(b(t));if(!1===e)S.innerText="Computer Missed",t.classList.add("hitted");else if(t.classList.add("hit-ship"),e.includes("sunk")){const r=e.replace(new RegExp("\\bsunk\\s*","g"),"");S.innerText=`Computer sank Players : ${r}`;let s=q(r);E[s].pos.push(t);for(const e of E[s].pos)e.classList.add("sunk");if(T(v))return I("Computer Wins")}else{S.innerText="Computer Hit",e=e.toLowerCase();let r=q(e);E[r].pos.push(t)}x.addEventListener("click",w)}}()}}function C(e,t){return e.some((e=>e.every(((e,r)=>e===t[r]))))}function q(e){for(let t=0;t<L.length;t++)if(L[t].name===e)return t}function T(e){let t=!0;for(const r of e.gameboard.ships)r.Sunk||(t=!1);return t}function I(e){x.removeEventListener("click",w);const t=document.createElement("div"),r=document.createElement("div"),s=document.createElement("h1"),n=document.createElement("button");s.innerText=e,n.innerText="Play Again",t.classList.add("endgame-container"),r.classList.add("endgame"),s.classList.add("endgame-title"),n.classList.add("endgame-button"),n.addEventListener("click",(()=>{window.location.href="index.html"})),r.append(s,n),t.append(r),document.body.append(t)}!async function(){await new Promise((e=>{const r=setInterval((()=>{void 0!==t&&(clearInterval(r),e())}),500)})),v=new g(t),x.addEventListener("click",w)}()})()})();